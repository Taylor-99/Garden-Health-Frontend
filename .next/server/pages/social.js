(()=>{var e={};e.id=892,e.ids=[892,888,660],e.modules={2661:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>h,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>k,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>b});var r=s(7093),l=s(5244),i=s(1323),o=s(2899),c=s.n(o),n=s(8910),u=s(1741),d=e([n,u]);[n,u]=d.then?(await d)():d;let h=(0,i.l)(u,"default"),x=(0,i.l)(u,"getStaticProps"),m=(0,i.l)(u,"getStaticPaths"),p=(0,i.l)(u,"getServerSideProps"),g=(0,i.l)(u,"config"),f=(0,i.l)(u,"reportWebVitals"),b=(0,i.l)(u,"unstable_getStaticProps"),j=(0,i.l)(u,"unstable_getStaticPaths"),y=(0,i.l)(u,"unstable_getStaticParams"),w=(0,i.l)(u,"unstable_getServerProps"),v=(0,i.l)(u,"unstable_getServerSideProps"),k=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/social",pathname:"/social",bundlePath:"",filename:""},components:{App:n.default,Document:c()},userland:u});a()}catch(e){a(e)}})},8910:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>n});var r=s(997);s(5833);var l=s(5198),i=s(5142),o=s.n(i),c=e([l]);l=(c.then?(await c)():c)[0],o().config();let n=(0,l.default)(({Component:e,pageProps:t})=>r.jsx("div",{children:r.jsx(e,{classame:"App",...t})}));a()}catch(e){a(e)}})},8598:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>h});var r=s(997),l=s(1664),i=s.n(l),o=s(1163),c=s(6689),n=s(4874),u=s(5198),d=e([n,u]);[n,u]=d.then?(await d)():d;let h=(0,u.default)(e=>{let t=(0,o.useRouter)(),[s,a]=(0,c.useState)(!1),[l]=(0,n.useCookies)(["token","user"]),[u,d]=(0,c.useState)("");(0,c.useEffect)(()=>{let e=l.user;e&&d(e)},[]);let h=async()=>{try{(await fetch("http://localhost:4000/auth/logout",{method:"get",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.token}`}})).ok&&((0,n.removeCookie)("token"),(0,n.removeCookie)("user"),t.replace("/auth"))}catch(e){console.log(e),console.log("Network error")}},x=()=>{a(!1)};return r.jsx("div",{children:(0,r.jsxs)("nav",{className:"flex justify-between items-center px-4 bg-green-900 py-2 w-full",children:[r.jsx("h1",{className:"text-white font-semibold text-xl",children:e.pageName}),(0,r.jsxs)("div",{className:" flex items-center ",children:[(0,r.jsxs)("h1",{className:"text-white text-base mr-4",children:["Welcome ",u]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>{a(!s)},className:"text-white font-semibold px-4",children:[r.jsx("span",{className:"ml-1 text-2xl",children:"â˜°"})," "]}),s&&(0,r.jsxs)("ul",{className:"absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md",children:[r.jsx("li",{children:r.jsx(i(),{href:"/dashboard",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",onClick:x,children:"Dashboard"})}),r.jsx("li",{children:r.jsx(i(),{href:"/plantjournal/garden",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",onClick:x,children:"Plant Journal"})}),r.jsx("li",{children:r.jsx(i(),{href:"/wellnessjournal/mood",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",onClick:x,children:"Wellness Journal"})}),r.jsx("li",{children:r.jsx(i(),{href:"/social",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",onClick:x,children:"Social"})}),r.jsx("li",{children:r.jsx(i(),{href:"/profile",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",onClick:x,children:"View Profile"})}),r.jsx("li",{children:r.jsx("input",{type:"button",onClick:()=>{h(),x()},className:"w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-200",value:"Logout"})})]})]})]})]})})});a()}catch(e){a(e)}})},5198:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>n});var r=s(997),l=s(1163),i=s(6689),o=s(4874),c=e([o]);o=(c.then?(await c)():c)[0];let n=e=>{let t=t=>{let s=(0,l.useRouter)(),[a]=(0,o.useCookies)(["token"]);return(0,i.useEffect)(()=>{(async()=>{let e=a.token;console.log("Frontend Token:",e),e||"/auth"===s.pathname||(console.log("Redirecting to login page..."),s.push("/auth"))})()},[a,s]),r.jsx(e,{...t})};return t.displayName=`withAuth(${e.displayName||e.name||"Component"})`,t};a()}catch(e){a(e)}})},1763:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>n});var r=s(997),l=s(4874),i=s(1163),o=s(5198),c=e([l,o]);[l,o]=c.then?(await c)():c;let n=(0,o.default)(({socialPosts:e},{username:t})=>{let s=(0,i.useRouter)(),[a]=(0,l.useCookies)(["token"]),o=async(e,s)=>{try{let r=s?.includes(t);await fetch(`http://localhost:4000/social/likes/${e}`,{method:r?"DELETE":"PUT",credentials:"include",headers:{Authorization:`Bearer ${a.token}`}})}catch(e){console.error("Error:",e.message)}};return r.jsx("div",{children:r.jsx("ul",{className:"max-w-screen-md w-full",children:e&&e.map((e,a)=>{let l=e.likes.length,i=e.likes?.includes(t);return(0,r.jsxs)("li",{className:"bg-white rounded-lg shadow-md p-4 mb-4 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("img",{src:e.userImage,className:"w-10 h-10 rounded-full mr-2",alt:"User Avatar"}),r.jsx("p",{className:"font-semibold",children:e.userName})]}),r.jsx("br",{}),(0,r.jsxs)("div",{className:"max-w-screen-md w-full",children:[r.jsx("p",{className:"mb-4 text-center",children:e.post}),r.jsx("img",{src:e.image,className:"w-full rounded-lg mb-4 mx-auto"})]}),(0,r.jsxs)("div",{className:"flex justify-end",children:[r.jsx("input",{type:"button",value:i?`Unlike ${l}`:`Like ${l}`,onClick:()=>o(e._id,e.likes),className:"bg-blue-500 text-white px-4 py-2 rounded mr-2 flex-grow"}),r.jsx("input",{type:"button",value:"View Comments",className:"bg-blue-500 text-white px-4 py-2 rounded flex-grow",onClick:()=>s.push(`/social/replies/${e._id}`)})]})]},a)})})})});a()}catch(e){a(e)}})},1741:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>x});var r=s(997),l=s(8598),i=s(6689),o=s(4874),c=s(1664),n=s.n(c),u=s(5198),d=s(1763),h=e([l,o,u,d]);[l,o,u,d]=h.then?(await h)():h;let x=(0,u.default)(()=>{let[e]=(0,o.useCookies)(["token"]),[t,s]=(0,i.useState)([]),[a,c]=(0,i.useState)("");return(0,i.useEffect)(()=>{let t=e.user;t&&c(t)},[]),(0,i.useEffect)(()=>{(async()=>{try{let t=await fetch("http://localhost:4000/social",{credentials:"include",headers:{Authorization:`Bearer ${e.token}`}}),a=await t.json();s(a)}catch(e){console.error("Error:",e.message)}})()},[e.token]),(0,r.jsxs)("div",{className:"min-h-screen flex-col items-center justify-center bg-gray-100 mx-auto",children:[r.jsx(l.default,{pageName:"Social"}),r.jsx("br",{}),r.jsx(n(),{href:"/social/createpost",className:"block p-6 max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg mx-auto bg-white rounded-xl shadow-md hover:shadow-lg hover:bg-gray-100 transition duration-300 text-center text-blue-500 hover:text-blue-700 font-semibold",children:"Create a Post"}),r.jsx("br",{}),r.jsx("div",{className:"flex justify-center",children:r.jsx(d.default,{socialPosts:t,username:a})})]})});a()}catch(e){a(e)}})},5833:()=>{},5142:e=>{"use strict";e.exports=require("dotenv")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4874:e=>{"use strict";e.exports=import("react-cookie")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[567,163,899,559],()=>s(2661));module.exports=a})();